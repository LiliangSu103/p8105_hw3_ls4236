p8105_hw3_ls4236
================
Liliang Su
2025-10-04

## Problem 1

Load the data

``` r
data("instacart")
```

### Dataset Exploration and description

Firstly explore the data and check missing values.

``` r
str(instacart)
```

    ## tibble [1,384,617 × 15] (S3: tbl_df/tbl/data.frame)
    ##  $ order_id              : int [1:1384617] 1 1 1 1 1 1 1 1 36 36 ...
    ##  $ product_id            : int [1:1384617] 49302 11109 10246 49683 43633 13176 47209 22035 39612 19660 ...
    ##  $ add_to_cart_order     : int [1:1384617] 1 2 3 4 5 6 7 8 1 2 ...
    ##  $ reordered             : int [1:1384617] 1 1 0 0 1 0 0 1 0 1 ...
    ##  $ user_id               : int [1:1384617] 112108 112108 112108 112108 112108 112108 112108 112108 79431 79431 ...
    ##  $ eval_set              : chr [1:1384617] "train" "train" "train" "train" ...
    ##  $ order_number          : int [1:1384617] 4 4 4 4 4 4 4 4 23 23 ...
    ##  $ order_dow             : int [1:1384617] 4 4 4 4 4 4 4 4 6 6 ...
    ##  $ order_hour_of_day     : int [1:1384617] 10 10 10 10 10 10 10 10 18 18 ...
    ##  $ days_since_prior_order: int [1:1384617] 9 9 9 9 9 9 9 9 30 30 ...
    ##  $ product_name          : chr [1:1384617] "Bulgarian Yogurt" "Organic 4% Milk Fat Whole Milk Cottage Cheese" "Organic Celery Hearts" "Cucumber Kirby" ...
    ##  $ aisle_id              : int [1:1384617] 120 108 83 83 95 24 24 21 2 115 ...
    ##  $ department_id         : int [1:1384617] 16 16 4 4 15 4 4 16 16 7 ...
    ##  $ aisle                 : chr [1:1384617] "yogurt" "other creams cheeses" "fresh vegetables" "fresh vegetables" ...
    ##  $ department            : chr [1:1384617] "dairy eggs" "dairy eggs" "produce" "produce" ...
    ##  - attr(*, "spec")=
    ##   .. cols(
    ##   ..   order_id = col_integer(),
    ##   ..   product_id = col_integer(),
    ##   ..   add_to_cart_order = col_integer(),
    ##   ..   reordered = col_integer(),
    ##   ..   user_id = col_integer(),
    ##   ..   eval_set = col_character(),
    ##   ..   order_number = col_integer(),
    ##   ..   order_dow = col_integer(),
    ##   ..   order_hour_of_day = col_integer(),
    ##   ..   days_since_prior_order = col_integer(),
    ##   ..   product_name = col_character(),
    ##   ..   aisle_id = col_integer(),
    ##   ..   department_id = col_integer(),
    ##   ..   aisle = col_character(),
    ##   ..   department = col_character()
    ##   .. )

``` r
sum(is.na(instacart))
```

    ## [1] 0

Here is a brief description about `instacart` dataset:

- **Structure**: The dataset contains 1384617 observations (rows) and 15
  dimentions (columns), with no missing data. Each row represents a
  single product added to a customer’s grocery cart, while each column
  specifies certain information about the order.
- **Key variables**:
  - `order_id`, `user_id`: Unique identifier for orders and users.
  - `product_id`, `product_name`: Identify the ordered item and its
    name.
  - `reorder`: Whether the user had placed orders containing this
    product before.
  - `order_dow`, `order_hour_of_day`: Day of a week and specific hour
    the order was placed.
  - `department`, `department_id`, `aisle`, `aisle_id`: Specific aisle
    and department (along with their IDs) the product belongs to.
- **Illustrative examples**:
  - One observation from the dataset details a customer (User \#112108)
    who placed their 4th order on a Thursday at 10:00 AM, starting their
    shopping with Bulgarian Yogurt, which is located at Yogurt aisle,
    Dairy & Eggs department. This item was listed as reordered,
    indicating the customer had purchased it before, which reflects a
    habitual buying pattern for this everyday dairy product. The order
    occurred just 9 days after their previous one, suggesting a
    relatively frequent and consistent shopping rhythm. This example
    illustrates how the dataset captures routine purchasing behavior for
    staple grocery items.

### Answers for questions

``` r
byaisle_df = instacart |> 
  group_by(aisle) |> 
  summarise(n = n()) |> 
  arrange(desc(n))
```

1.  There are in total 134 aisles in the dataset, and the fresh
    vegetables aisle are the most items ordered from.

``` r
instacart |> 
  group_by(aisle_id) |> 
  summarise(n = n()) |> 
  filter(n > 10000) |> 
  ggplot(aes(x = reorder(aisle_id, n), y = n)) +
  geom_col() +
  labs(title = "Number of Items Ordered by Aisle (>10,000)", 
       x = "Aisle ID", 
       y = "Number of Items") +
  theme(
    axis.text.x = element_text(size = 8)
  )
```

<img src="p8105_hw3_ls4236_files/figure-gfm/unnamed-chunk-4-1.png" width="90%" />

2.  The required plot is shown above.

``` r
instacart |> 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) |>
  group_by(aisle, product_name) |> 
  summarise(n = n()) |> 
  slice_max(order_by = n, n = 3) |> 
  arrange(aisle, desc(n)) |> 
  knitr::kable(digits = 2)
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the
    ## `.groups` argument.

| aisle | product_name | n |
|:---|:---|---:|
| baking ingredients | Light Brown Sugar | 499 |
| baking ingredients | Pure Baking Soda | 387 |
| baking ingredients | Cane Sugar | 336 |
| dog food care | Snack Sticks Chicken & Rice Recipe Dog Treats | 30 |
| dog food care | Organix Chicken & Brown Rice Recipe | 28 |
| dog food care | Small Dog Biscuits | 26 |
| packaged vegetables fruits | Organic Baby Spinach | 9784 |
| packaged vegetables fruits | Organic Raspberries | 5546 |
| packaged vegetables fruits | Organic Blueberries | 4966 |

- 
